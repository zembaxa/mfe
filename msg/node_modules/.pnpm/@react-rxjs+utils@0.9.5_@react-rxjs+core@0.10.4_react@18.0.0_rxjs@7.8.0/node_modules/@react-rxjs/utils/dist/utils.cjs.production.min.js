var v=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var J=e=>v(e,"__esModule",{value:!0});var Q=(e,n)=>{for(var t in n)v(e,t,{get:n[t],enumerable:!0})},X=(e,n,t,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of q(n))!H.call(e,r)&&(t||r!=="default")&&v(e,r,{get:()=>n[r],enumerable:!(o=$(n,r))||o.enumerable});return e};var Y=(e=>(n,t)=>e&&e.get(n)||(t=X(J({}),n,1),e&&e.set(n,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var ee={};Q(ee,{combineKeys:()=>g,contextBinder:()=>D,createKeyedSignal:()=>h,createListener:()=>W,createSignal:()=>m,mergeWithKey:()=>G,partitionByKey:()=>R,selfDependant:()=>F,suspend:()=>f,suspended:()=>V,switchMapSuspended:()=>N});var x=require("rxjs"),g=(e,n)=>new x.Observable(t=>{let o=new Map,r=new Set,s=new Map,a=!1,c=!0,T=()=>{if(!a){let p=Object.assign(new Map(s),{changes:r});r=new Set,c=!1,t.next(p)}},b=e.subscribe(p=>{a=!0;let d=new Set(p);o.forEach((u,i)=>{d.has(i)?d.delete(i):(u.unsubscribe(),o.delete(i),s.has(i)&&(r.add(i),s.delete(i)))}),d.forEach(u=>{o.set(u,n(u).subscribe(i=>{(!s.has(u)||s.get(u)!==i)&&(r.add(u),s.set(u,i),T())},i=>{t.error(i)}))}),a=!1,(r.size||c&&!d.size)&&T()},p=>{t.error(p)},()=>{t.complete()});return()=>{b.unsubscribe(),o.forEach(p=>{p.unsubscribe()})}});var O=require("rxjs");function m(e=O.identity){let n=new O.Subject;return[n.asObservable(),(...t)=>n.next(e(...t))]}var A=require("rxjs");function h(e,n){let t=new Map;return[o=>{let r=new A.Observable(s=>{t.has(o)||t.set(o,new Set);let a=t.get(o);return a.add(s),()=>{a.delete(s),a.size===0&&t.delete(o)}});return r.key=o,r},(...o)=>{var a;let r=n?n(...o):o.length===2?o[1]:o[0],s=e?e(r):o[0];(a=t.get(s))==null||a.forEach(c=>{c.next(r)})}]}var K=require("rxjs"),w=require("rxjs/operators"),G=(e,...n)=>(0,K.merge)(...Object.entries(e).map(([t,o])=>(0,K.from)(o).pipe((0,w.map)(r=>({type:t,payload:r})))).concat(n));var S=require("@react-rxjs/core"),l=require("rxjs"),E=require("rxjs/operators");function R(e,n,t){let o=new l.Observable(r=>{let s=new Map,a=!1,c=!1,T=e.subscribe(b=>{let p=n(b);if(s.has(p))return s.get(p).source.next(b);let d=new l.Subject,u=(0,S.shareLatest)()((t||l.identity)(d,p));u.key=p;let i={source:d,observable:u,subscription:new l.Subscription};s.set(p,i),i.subscription=u.subscribe(l.noop,C=>r.error(C),()=>{s.delete(p),r.next(y(s)),s.size===0&&c&&r.complete()}),d.next(b),r.next(y(s)),a=!0},b=>{c=!0,s.size?s.forEach(p=>p.source.error(b)):r.error(b)},()=>{c=!0,s.size?s.forEach(b=>b.source.complete()):r.complete()});return a||r.next(y(s)),()=>{T.unsubscribe(),s.forEach(b=>{b.source.unsubscribe(),b.subscription.unsubscribe()})}}).pipe((0,S.shareLatest)());return[r=>Z(o,r),o.pipe((0,E.map)(r=>Array.from(r.keys())))]}function y(e){return new Map(Array.from(e.entries()).map(([n,t])=>[n,t.observable]))}var Z=(e,n)=>{let t=new l.Observable(o=>{let r,s=e.subscribe(a=>{var c;r=r||((c=a.get(n))==null?void 0:c.subscribe(o))},a=>{o.error(a)},()=>{o.complete()});return()=>{r==null||r.unsubscribe(),s.unsubscribe()}});return t.key=n,t};var I=require("rxjs"),P=require("@react-rxjs/core");var M=require("rxjs"),k=e=>n=>new M.Observable(t=>{let o=!1,r=n.subscribe(s=>{o=!0,t.next(s)},s=>{t.error(s)},()=>{t.complete()});return o||t.next(e),r});var f=e=>k(P.SUSPENSE)((0,I.from)(e));var V=()=>f;var j=require("rxjs"),L=require("rxjs/operators");var N=e=>(0,j.pipe)((0,L.switchMap)((n,t)=>f(e(n,t))));var U=require("rxjs"),B=require("rxjs/operators"),F=()=>{let e=new U.Subject;return[e.asObservable(),()=>(0,B.tap)(e)]};var z=require("@react-rxjs/core"),_=e=>e();function D(...e){let n=()=>e.map(_);return function(){let[t,o]=z.bind.apply(null,arguments);return[(...r)=>t(...n(),...r),o]}}function W(...e){return m(...e)}module.exports=Y(ee);
//# sourceMappingURL=utils.cjs.production.min.js.map
